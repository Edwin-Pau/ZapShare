<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>ZapShare</title>
        <link rel="stylesheet" type="text/css" media="screen" href="css/style-map.css">
        <link rel="stylesheet" type="text/css" media="screen" href="css/style.css">
        <title>ZapShare - Map</title>
        <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
        <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
        <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="css/style.css">
            <!------------------------------------------------------
            ------------------  Sets up FireBase  ------------------
            ------------------------------------------------------->
            <script src="js/setup_firebase.js"></script>
    </head>

    <body>
            <!------------------------------------------------------
            ----------- Header Section Including the Nav Bar  ------
            ------------------------------------------------------->
            <header>
            <div class="wrapper">
                <div><a href="index.html"><img src="images/logo.png" id="logo" alt="logo"></a></div>
            <nav>
                <ul>
                    <li><a class="navnotcurrent" href="index.html">Home</a></li>
                    <li><a class="navnotcurrent" href="about.html">About</a></li>
                    <li><a class="navcurrent" href="map.html">Map</a></li>
                    <li><a class="navnotcurrent" href="contact.html">Contact</a></li>
                    <li><button id="loginbutton" onclick="window.location.href='login.html'">Login</button></li>
                </ul>
            </nav>
            </div>
            </header>    
            
        
            <!------------------------------------------------------
            ---------- Main Section - Contents of the Page ---------
            ------------------------------------------------------->
            <main>
                <div id="map-interface">
                    <div id="map-transform">
                        <div id="map-widget-transform">
                            <div id="map-widget">
                                <div id="search-bar-transform">
                                    <div id="search-bar-background">
                                        <input id="origin-input" class="search-bar" type="text"
                                            placeholder="Enter an origin location">
                                        <input id="destination-input" class="search-bar" type="text"
                                            placeholder="Enter a destination location">
                                    </div>
                                </div>
                                <div id="search-text-transform">
                                    <div id="search-text">
                                        No Results Found
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="map"></div>
                        <script>
                        // This example requires the Places library. Include the libraries=places
                        // parameter when you first load the API. For example:

                        function initMap() {
                          var map = new google.maps.Map(document.getElementById('map'), {
                            mapTypeControl: false,
                            center: {lat: -33.8688, lng: 151.2195},
                            zoom: 13
                          });

                          new AutocompleteDirectionsHandler(map);
                        }

                        /**
                         * @constructor
                         */
                        function AutocompleteDirectionsHandler(map) {
                          this.map = map;
                          this.originPlaceId = null;
                          this.destinationPlaceId = null;
                          this.travelMode = 'DRIVING';
                          this.directionsService = new google.maps.DirectionsService;
                          this.directionsDisplay = new google.maps.DirectionsRenderer;
                          this.directionsDisplay.setMap(map);

                          var originInput = document.getElementById('origin-input');
                          var destinationInput = document.getElementById('destination-input');

                          var originAutocomplete = new google.maps.places.Autocomplete(originInput);
                          // Specify just the place data fields that you need.
                          originAutocomplete.setFields(['place_id']);

                          var destinationAutocomplete =
                              new google.maps.places.Autocomplete(destinationInput);
                          // Specify just the place data fields that you need.
                          destinationAutocomplete.setFields(['place_id']);
                          this.setupPlaceChangedListener(originAutocomplete, 'ORIG');
                          this.setupPlaceChangedListener(destinationAutocomplete, 'DEST');
                        }

                        AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener = function(
                            autocomplete, mode) {
                          var me = this;
                          autocomplete.bindTo('bounds', this.map);

                          autocomplete.addListener('place_changed', function() {
                            var place = autocomplete.getPlace();

                            if (!place.place_id) {
                              window.alert('Please select an option from the dropdown list.');
                              return;
                            }
                            if (mode === 'ORIG') {
                              me.originPlaceId = place.place_id;
                            } else {
                              me.destinationPlaceId = place.place_id;
                            }
                            me.route();
                          });
                        };

                        AutocompleteDirectionsHandler.prototype.route = function() {
                          if (!this.originPlaceId || !this.destinationPlaceId) {
                            return;
                          }
                          var me = this;

                          this.directionsService.route(
                              {
                                origin: {'placeId': this.originPlaceId},
                                destination: {'placeId': this.destinationPlaceId},
                                travelMode: this.travelMode
                              },
                              function(response, status) {
                                if (status === 'OK') {
                                  me.directionsDisplay.setDirections(response);
                                } else {
                                  window.alert('Directions request failed due to ' + status);
                                }
                              });
                        };

                            </script>
                            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBS6lamHTrbNKoFP95FHKKncimETUfGFhg&libraries=places&callback=initMap"
                                async defer></script>
                              <script
                        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBS6lamHTrbNKoFP95FHKKncimETUfGFhg&libraries=places"></script>
                    </div>
                </div>
            </main>
            
        
            <!------------------------------------------------------
            ---------- Footer Section - Links to Subpages ----------
            ------------------------------------------------------->
            <footer>
                <div class="footerfourcolumns">
                    <div class="footercolumn">
                        <div class="footertitle">Quick Links</div>
                        <ul>
                            <li><a href="sitemap.html">Site Map</a></li>
                        </ul>
                    </div>

                    <div class="footercolumn">
                        <div class="footertitle">Policies</div>
                        <ul>
                            <li><a href="privacy.html">Privacy</a></li>
                            <li><a href="disclaimer.html">Disclaimer</a></li>
                            <li><a href="terms.html">Terms of Use</a></li>
                        </ul>
                    </div>

                    <div class="footercolumn">
                        <div class="footertitle">Support</div>
                        <ul>
                            <li><a href="faq.html">FAQ</a></li>
                            <li><a href="contact.html">Contact Us</a></li>
                        </ul>
                    </div>

                    <div class="footercolumn">
                        <div class="footertitle">About</div>
                        <ul>
                            <li><a href="about.html">About Us</a></li>
                            <li><a href="team.html">Meet the Team</a></li>
                            <li><a href="jointeam.html">Join the Team</a></li>
                        </ul>
                    </div>
                </div>
                <div id="footer-p">Website designed by <a href="mailto:zapshareplatform@gmail.com">Team 3</a> for <a href="http://bcit.ca">BCIT</a> COMP 1930
                    <br>
                    &copy; 2019 ZapShare, All Rights Reserved.</div>
            </footer>
    </body>   
</html>